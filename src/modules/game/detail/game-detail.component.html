<div class="container">
    <div class="left-container">
        <div class="game-bar">
            <div class="cover">
                @if (game.name && game.image) {
                    <img
                        [src]="game.image"
                        alt="game" />
                } @else if (game.name && !game.image) {
                    <div class="d-flex direction-column align-center">
                        <warning-icon
                            [size]="32"
                            color="#e1e1e1">
                        </warning-icon>
                        Sync this game with IGDB
                    </div>
                }
            </div>

            <div>
                @if (game.name) {
                    @if (game.igdbId) {
                        <app-button (onClick)="edit()"> Edit </app-button>
                    } @else {
                        <app-button (onClick)="syncWithIgdb()"> Sync with IGDB </app-button>
                    }
                }

                <div class="rating-container">
                    <star-rating
                        [rating]="game.rating"
                        color="#3f4b64"
                        colorSelected="#ea377a"
                        [size]="48">
                    </star-rating>
                </div>
            </div>
        </div>

        <div class="game-information">
            <div>
                <div class="game-information-label">Status</div>
                <div class="d-flex align-center">
                    <status [type]="game.statusDescription"></status>
                    {{ game.statusDescription }}
                </div>
            </div>

            <div>
                <div class="game-information-label">Platform</div>
                <div>{{ game.platformText }}</div>
            </div>

            <div>
                <div class="game-information-label">Time played</div>
                <div>{{ game.timePlayed.hours }} hours and {{ game.timePlayed.minutes }} minutes</div>
            </div>

            <div>
                <div class="game-information-label">Is campaign complete?</div>
                <div>{{ game.isCampaignComplete ? "Yes" : "No" }}</div>
            </div>

            <div>
                <div class="game-information-label">Is platinumed?</div>
                <div>{{ game.isPlatinumed ? "Yes" : "No" }}</div>
            </div>

            <div>
                <div class="game-information-label">Date completed</div>
                <div>{{ game.dateCompleted || "-" }}</div>
            </div>
        </div>
    </div>
    <div class="right-container">
        <div class="game-title">{{ game.name }}</div>

        <div class="game-description">{{ game.description }}</div>

        <div class="achievements-container">
            <div class="achievements-title">Achievements</div>

            @for (achievement of game.achievements; track $index; let last = $last) {
                <div
                    class="achievement-container"
                    [class.last]="last"
                    [class.achieved]="achievement.isAchieved">
                    <div class="icon">
                        @if (achievement.image) {
                            <img
                                [src]="achievement.image"
                                alt="achievement icon" />
                        } @else {
                            <div class="achievement-no-icon">
                                <trophy-icon color="#FFF"></trophy-icon>
                            </div>
                        }
                    </div>
                    <div class="achievement-informations">
                        <div>
                            <div>{{ achievement.name }}</div>
                            <div class="achievement-description">{{ achievement.description || "-" }}</div>
                        </div>
                        <div class="d-flex">
                            <div class="d-flex align-center direction-column">
                                <div>{{ achievement.dateAchieved | date: "dd/MM/YYYY" }}</div>
                                <div class="achievement-time">{{ achievement.dateAchieved | date: "HH:mm:ss" }}</div>
                            </div>
                            @if (achievement.percentageAchieved) {
                                <div class="achievement-earn-rate">{{ achievement.percentageAchieved | number: "1.2-2" }} %</div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
